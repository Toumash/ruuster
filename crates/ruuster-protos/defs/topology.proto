syntax = "proto3";
package topology_v1;

service Topology {
    rpc AddQueue(QueueDeclareRequest) returns (QueueDeclareResponse);
    rpc RemoveQueue(RemoveQueueRequest) returns (RemoveQueueResponse);
    rpc AddExchange(ExchangeDeclareRequest) returns (ExchangeDeclareResponse);
    rpc RemoveExchange(RemoveExchangeRequest) returns (RemoveExchangeResponse);
    rpc Bind(BindRequest) returns (BindResponse);
    rpc Unbind(UnbindRequest) returns (UnbindResponse);
}

message QueueDeclareRequest {
    string queue_name = 1;
    bool durable = 2;
}

message QueueDeclareResponse {
    bool success = 1;
    string error_message = 2;
}

message ExchangeDeclareRequest {
    string exchange_name = 1;
    int32 kind = 2;
    bool durable = 3;
}

message ExchangeDeclareResponse {
    bool success = 1;
    string error_message = 2;
}

message RemoveQueueRequest {
    string queue_name = 1;
}

message RemoveQueueResponse {
    bool success = 1;
    string error_message = 2;
}

message RemoveExchangeRequest {
    string exchange_name = 1;
}

message RemoveExchangeResponse {
    bool success = 1;
    string error_message = 2;
}

message BindRequest {
    string exchange_name = 1;
    string queue_name = 2;
    optional string routing_key = 3;
}

message BindResponse {
    bool success = 1;
    string error_message = 2;
}

message UnbindRequest {
    string exchange_name = 1;
    string queue_name = 2;
    optional string routing_key = 3;
}

message UnbindResponse {
    bool success = 1;
    string error_message = 2;
}

